"use strict";var StackExchangeDevStory;!function(){var e=function(e,t,n,i){if(e.length){var r=StackOverflow.Models.Story.UserStoryItemTypeId[n.attr("data-typeid")];if(void 0==r)return;e.typeWatch({"highlight":!1,"wait":500,"captureLength":-1,"callback":function(){var o=e.closest("form");e.closest(".coverable-input.input-loader").addClass("loading"),$.ajax({"type":"POST","url":"/users/story/"+StackExchange.user.options.userId+"/search-lists-autocomplete","data":{"query":e.val(),"fkey":StackExchange.options.user.fkey,"itemType":r}}).done(function(r){var a=e.closest(".autocomplete");a.find(".autocomplete-suggestions-list").remove(),e.closest(".coverable-input.input-loader").removeClass("loading");var s=$(r).insertAfter(e).on("click",".autocomplete-suggestion, .autocomplete-default",function(e){var r=$(e.currentTarget);if(r.hasClass("autocomplete-default"))return o.find(t).focus(),!1;var a=r.data("list-id"),s=r.find(".autocomplete-suggestion-image [data-url]"),c=r.find(".autocomplete-suggestion-match").text(),l=s.data("url"),u=s.data("resized-url"),d=r.find(".autocomplete-suggestion-url").text();return i&&i(n,{"name":c,"imageUrl":l,"resizedImageUrl":u,"url":d,"listId":a}),o.find(t).focus(),!1});e.is(":focus")||s.hide()})}})}},t=function(e){var t=null===e?$(".js-spoken-languages"):$(".js-spoken-languages",e);if(t.length>0){var n=parseInt(t.attr("data-max-count")),i=t.attr("data-placeholder"),r=$('<input class="s-input" type="text" name="SpokenLanguages" data-ga-action="Spoken Languages" />').attr("placeholder",i),o=function(){return $("input[type=text]",t)},a=function(){$(".js-message",t).before(r.clone(!0))},s=function(){for(var e=o().filter(function(e,t){return 0===(t.value||"").trim().length}).get(),t=0;t<e.length-1;t++){var i=$(e[t]);i[0]!==document.activeElement&&i.remove()}0===e.length&&o().length<n&&a()};t.on("keyup keydown blur","input",s)}},n=(function(){function e(){this._newItems=null,this._addItemIsVisible=!1,this._editStarted=!1,this._loadingForm=!1,this._mustUse=$(".additem-body").length>0}return Object.defineProperty(e.prototype,"mustUse",{"get":function(){return this._mustUse},"enumerable":!1,"configurable":!0}),Object.defineProperty(e.prototype,"isAddingItem",{"get":function(){return this._addItemIsVisible},"enumerable":!1,"configurable":!0}),e.prototype.afterSaveOrCancel=function(){this.mustUse&&this._hideAddItemForm()},e.prototype._hideAddItemForm=function(){$("#add-new-item-form").html("").css({"margin-top":"","left":""}).removeClass("with-upper-arrow").addClass("empty-add-new-item-form"),$("#page-cover").hide(),$(".tooltip").show(),this._clickedButton.css({"background":"","z-index":"initial"}),this._addItemIsVisible=!1},e.prototype.init=function(){var e=this;if(this.mustUse){var t=function(t){return e._addItemIsVisible&&!e._editStarted&&e._hideAddItemForm(),t.preventDefault(),!1};$("#page-cover").on("click",function(e){return t(e)}),$("#add-new-item-form").on("click",function(e){return"add-new-item-form"===e.target.id?t(e):!0}),$("#show-more-item-types-button").on("click",function(){$("#more-add-item-buttons").show()}),this._addItem=$(".additem-body"),$(document).keyup(function(t){e._addItemIsVisible&&(27!==t.keyCode||e._editStarted?e._editStarted=!0:e._hideAddItemForm())}),$(document).on("click",".additem-body .-item",function(t){if("show-more-item-types-button"===t.target.closest("li").id)return $(".initially-hidden").css("visibility","visible"),$("#show-more-item-types-button").hide(),void 0;if(e._addItemIsVisible)return e._hideAddItemForm(),void 0;if(!e._loadingForm){var n=$(t.target.closest(".-item")).attr("data-add-item-link");n&&(e._loadingForm=!0,$.ajax(n).done(function(n){e._loadingForm=!1;var i=$(n);i.addClass("nopseudos"),$("#page-cover").show(),$("#add-new-item-form").append(i).addClass("with-upper-arrow").css("z-index","1000");var r=$(t.target).closest(".-item"),o=$("#item-add");e._clickedButton=r;var a,s,c=$("#item-add").css("background-color"),l=r.position().top-58,u=$("#add-item-buttons-container").width()/2;r.position().left+r.width()<u?(a=r.position().left,s=r.width()/2):(a=r.position().left+r.width()-o.outerWidth(),s=o.outerWidth()-r.width()/2),$("#add-new-item-form").append("<style>#add-new-item-form::before{ border-bottom-color: "+c+"; left:"+s+"px}</style>").removeClass("empty-add-new-item-form"),$("#add-new-item-form .timeline-item").css({"border":"0"}),$("#add-new-item-form").css({"margin-top":l,"left":a}),$(".tooltip").hide(),r.css({"background":"white","z-index":1e3}),$(".item-cancel-button").on("click",function(t){return t.preventDefault(),e._hideAddItemForm(),!1}),e._addItemIsVisible=!0,e._editStarted=!1}))}})}},e}(),!1);StackExchange.user.initTimeline=function(){if(!n){n=!0,$(document).on("click",".timeline form :submit, .job-requirements-form :submit",function(e){$(e.target).data("clicked",!0)}),$(document).on("submit",".timeline form, .job-requirements-form",function(e){var t=$(e.target);t.find(":submit[name][value]").each(function(e,n){var i=$(n);if(i.data("clicked")){i.data("clicked",null);var r=t.find('input[name="'+i.attr("name")+'"]').not(":submit");r.length||(r=$("<input>").attr({"type":"hidden","name":i.attr("name")}).addClass("js-submit").appendTo(t)),r.val(i.attr("value"))}})});var i=function(e){$(".description-expander",e).parent().each(function(e,t){var n=$(t),i=n.find(".description-expander"),r=n.find(".description-content-truncated"),o=n.find(".description-content-full"),a=i.is(":checked")?o:r,s=r.data("max-height")||parseInt(r.css("max-height"));r.data("max-height",s);var c=o.attr("style");o.css({"visbility":"hidden","display":"block"});var l=o.outerHeight(!1);if(o.attr("style",c?c:""),l>s){var u=a.children();u=u.add(u.find("a, b, i, strong, em, li"));for(var d=Math.min(s,$(u[0]).outerHeight(!1)),f=a.offset().top,h=1;h<u.length;h++){var p=$(u[h]),g=p.offset().top-f,m=p.outerHeight(!1),v=g+m;s>v&&(d=Math.max(d,v))}r.css("max-height",d+"px")}s>l?n.removeClass("description-ellipsis"):n.addClass("description-ellipsis")})};i(),$(document).on("click",".timeline .feature-banner .js-toggle",function(e){e.preventDefault();var t=$(e.target);$(".js-toggable",t.closest(".feature-banner")).toggleClass("_hidden")}),$(document).on("click",".js-add-assessment",function(e){e.preventDefault(),StackExchange.using("gps",function(){StackExchange.gps.track("story.assessment.prompt.clicked",{"Location":"Header"})}),$("html,body").animate({"scrollTop":$("#item-add").offset().top-20}),$(".item-add.assessment input").click()}),$(document).on("click",".js-scroll-to",function(e){e.preventDefault();var t=$(this).attr("href");$("html,body").animate({"scrollTop":$(t).offset().top-20})}),$(document).on("click",".item-add.assessment",function(e){$(e.target).hasClass("dno")||StackExchange.using("gps",function(){StackExchange.gps.track("story.assessment.prompt.clicked",{"Location":"MenuItem"})})});var r=function(){$.ajax({"url":"/users/story/edit/"+StackExchange.user.options.userId+"/header/featured-assessments","type":"GET","dataType":"html"}).success(function(e){$(".js-featured-assessments").html(e)})},o=function(){var e,t,n=null,i=function(e,i,r){n=$(e).children(".list-card"),n.css({"display":"flex","left":i,"top":r}),t=!0,$(n).hover(function(){n.stop(!0,!0).css("display","flex")},function(){n.css("display","none"),t=!1})};$(document).on("mouseenter",".js-listcard-hover",function(n){var r=n.currentTarget,o=r.offsetParent.offsetWidth,a=r.offsetLeft/o*100+"%",s=r.offsetParent.offsetHeight,c=r.offsetTop/s*100+"%",l=$(r).attr("data-list-url"),u=$(r).closest(".timeline-item-content").children(".js-listcard-container:first");0===$(u).children().length?setTimeout(function(){e=l,$.ajax({"url":l,"type":"GET","dataType":"html"}).success(function(n){$(u).html(n),t||e!==l||i(u,a,c)})},0):i(u,a,c)}),$(document).on("mouseleave",".js-listcard-hover",function(){$(n).delay(100).fadeOut("fast"),t=!1})};o();var a=function(n){if(!n.data("initialized")){n.data("initialized",!0);var r=n.find(".js-tag-editor");r.length&&StackExchange.using("tagEditor",function(){r.each(function(e,t){StackExchange.tagEditor($(t),{"excerpts":!1,"tagMenus":!0,"useStacksClasses":!0})})});var o=n.find(".autocomplete .autocomplete-input");e(o,"input[name='Title']",n,l),o.length&&n.find(".company-tag .delete-tag").click(function(e){$(e.currentTarget).closest(".input-cover").remove(),n.find("input[name='Company'], input[name='Url'], input[name='LogoUrl'], input[name='School'], input[name='ImageUrl']").prop("disabled",!1).eq(0).focus(),n.find("input[name='ListId']").remove(),n.find(".img.logo").removeClass("disabled").addClass("js-img-edit"),n.find(".img .remove").removeClass("dno").addClass("js-img-remove")});var a=n.filter("#form-section-PersonalInfo");if(a.length){var s=!0,c=$(".privacy-helper").data("is-public");a.find(".privacy-wrapper").each(function(e,t){var n=$(t),i=n.find(".privacy-checkbox"),r=i.find("input:checkbox"),o=i.data("target-id"),a=n.find("#"+o),l=!1;r.is(":checked")||(l=!0,s=!1);var u=function(){s&&c||(l=!0,i.show())},d=function(){i.hide()};n.on("focusout",function(){window.setTimeout(function(){$(document.activeElement).closest(n).length||d()},2)}),a.on("keydown",function(){return u()}).on("focus",function(){l&&u()})})}var u=a.find("#form-section-PersonalInfo-Location");if(u.length){var d=n.find("#form-section-PersonalInfo-LocationPlaceId");if(u.typeWatch({"wait":0,"callback":function(){d.val("")},"highlight":!1,"captureLength":-1}),window.google&&window.google.maps){var f=new google.maps.places.Autocomplete(u[0],{"types":["geocode"],"fields":["place_id","name","types"]});f.addListener("place_changed",function(){d.val("G:"+f.getPlace().place_id)})}}var h=n.find(".textarea-with-counter textarea");h.length&&h.each(function(e,t){var n=$(t);n.charCounter({"min":StackExchange.options.story.minCompleteBodyLength,"max":4e3,"target":n.closest(".textarea-with-counter").find(".-counter-span"),"ignoreWhitespace":!0,"setIsValid":function(e){var t=n.next(".-counter");t.toggleClass("-success",e),t.toggleClass("-fail",!e),t.find(".-counter-span").toggleClass("dno",e),t.find(".-success-span").toggleClass("dno",!e)}}),n.val()&&n.trigger("charCounterUpdate")}),i(n),t(n)}};$(".timeline-item, .header-edit-section").each(function(e,t){a($(t))});var s=function(e,t){var n;if(e&&null!=(n=t.data("order-by"))){for(var i=e.siblings().filter("[data-order-by]").toArray(),r=null,o=0;o<i.length;o++){var s=$(i[o]);if(s.data("order-by")<n){r=s;break}}r?t.insertBefore(r):t.appendTo(".timeline-feed")}else e?t.insertBefore(e):t.insertBefore(".timeline-feed .timeline-item:first");if(e){var c=e.data("next-focus");if(!c){var l=e.find("input:focus");l.length&&(c=l.attr("name"))}c&&t.find("input[name='"+c+"']").focus(),e.remove()}a(t)},c={"get":function(e){"#"!==e.charAt(0)&&(e="#"+e);var t=this[e];return t||(window.location.href="/users/story/"+StackExchange.user.options.userId+"#item-add"),delete this[e],t.find(".js-loader").removeClass("loading"),t},"put":function(e){if(e){var t="#"+e.attr("id");this[t]=e}}},l=function(e,t){var n=v($(e).find(".js-img-edit"));if(t.imageUrl?n.setImage(t.imageUrl,t.resizedImageUrl):n.empty(),$(e).find("input[name='Url']").val(t.url),$(e).find("input[name='Company']").val(t.name),$(e).find("input[name='School']").val(t.name),t.listId){var i=$(e).closest("form"),r=$("<input type='hidden' name='ListId' />").val(t.listId),o=$("<input type='hidden' name='ListClicked' />").val("true");i.find("input[name='ListId']").remove().end().append(r).find("input[name='ListClicked']").remove().end().append(o),i.submit()}$(e).data("next-focus","Title")},u=function(e){try{for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf("DevStory:"+e)&&localStorage.removeItem(n)}}catch(i){}},d=function(e,t){if(t.is("input,textarea,select")&&!t.is("[type=hidden],[type=submit],[type=reset]")){var n=t.attr("name");if(n){var i=t.val();if(t.is("[type=radio],[type=checkbox]")&&(i&&(n+=":"+i),i=t.is(":checked")),n)try{localStorage.setItem("DevStory:"+e+":"+n,i)}catch(r){}}}},f=function(e,t){t.find("input,textarea,select").each(function(t,n){var i=$(n);if(!i.is("[type=hidden],[type=submit],[type=reset],.js-ignore-restore")){var r=i.attr("name");if(r)try{i.is("[type=radio],[type=checkbox]")&&(r+=":"+i.val());var o=localStorage.getItem("DevStory:"+e+":"+r);o&&(i.is("[type=radio],[type=checkbox]")?i.prop("checked","true"===o):i.val(o))}catch(a){}}})},h=function(e){e.preventDefault();var t,n=$(e.target);if(n.attr("data-adds-item")){t=$("#item-add"),t.length||(t=null);var i=c.get("#item-add");t&&i&&(t.replaceWith(i),t=i)}else t=n.closest(".timeline-item");c.put(t),p(n).done(function(e){var i=$(e),r=i.data("typeid"),o=i.is("#item-add"),a=o?"-1":i.attr("id"),c=i.find("form");c.length>0&&f(r+":"+a,c),s(t,i),n.attr("data-scroll-to")&&i[0].scrollIntoView(!0)})},p=function(e){var t="submitting";return e.hasClass(t)?$.Deferred().promise():(e.addClass(t),$.ajax({"type":e.attr("method")||"GET","url":e.attr("action")||e.attr("href"),"data":e.is("form")?e.serialize():null}).always(function(){e.removeClass(t),e.find(".js-submit").remove(),e.find(".js-loader").removeClass("loading")}))};$(document).on("click",".js-loader",function(e){$(e.target).closest(".js-loader").addClass("loading")}),$(document).on("click",".timeline .timeline-item .item-edit-button a",h),$(document).on("click",".timeline .timeline-item.placeholder a.js-add-link",h),$(document).on("submit",".timeline .timeline-item.add form",h),$(document).on("change",".timeline .timeline-item input,textarea,select",function(e){var t=$(e.target),n=t.closest(".timeline-item"),i=n.data("typeid"),r=n.is("#item-add"),o=r?"-1":n.attr("id");d(i+":"+o,t)}),$(document).on("click",".timeline .timeline-item a.item-cancel-button",function(e){var t=e.target,n=$(t),i=n.closest(".timeline-item"),r=c.get(t.hash);r&&(s(i,r),e.preventDefault());var o=i.data("typeid"),a=i.is("#item-add"),l=a?"-1":i.attr("id");u(o+":"+l)}),$(document).on("click",".js-og-request",function(e){e.preventDefault();var t=$.trim($("input[name=Url]").val()),n=$(e.currentTarget).closest("form");if(!t.length)return n.submit();/^https?:/.test(t)||(t="http://"+t);var i=g(t,n),r=i.fail(function(){var e=t.replace("http://","https://");return g(e,n)});r.then(function(e){$(n).find(".js-og-title").val(e.hybridGraph.title),$(n).find(".js-og-image-url").val(e.hybridGraph.image),$(n).find(".js-og-description").val(e.hybridGraph.description),$(n).submit()},function(){$(n).submit()})});var g=function(e){var t="https://opengraph.io/api/1.0/site/"+encodeURIComponent(e)+"?app_id="+StackExchange.settings.userProfile.openGraphAPIKey;return $.ajax({"dataType":"json","url":t}).then(function(e){return e.error?$.Deferred().reject(new Error(e.error)):e})};$(document).on("submit",".timeline .timeline-item.edit form",function(e){e.preventDefault();var t=$(e.target),n=t.closest(".timeline-item"),i=n.is("#item-add"),r=n.data("typeid"),o=$(e.target);p(o).done(function(e){var t=$(e);i&&!t.is("#item-add")?(c.get("#item-add").insertBefore(n),u(r)):i||t.is(".edit")||u(r),s(n,t),E(t)})}),$(document).on("submit",".timeline .timeline-item .item-delete-button form",function(e){e.preventDefault();var t=$(e.target);t.closest(".timeline-item").find(".timeline-item-warning").css("display","flex")}),$(document).on("click",".timeline .timeline-item .timeline-item-warning a.js-btn-warning",function(e){$(e.currentTarget).closest(".timeline-item-warning").hide()}),$(document).on("click",".timeline .timeline-item .timeline-item-warning a.js-btn-confirm",function(e){var t=$(e.currentTarget).closest(".timeline-item").find(".item-delete-button form");p(t).done(function(){var e=t.closest(".timeline-item");e.fadeOutAndRemove(),E(e),e.hasClass("assessment")&&r()})}),$(document).on("change","input[type=checkbox][data-current-for]",function(e){var t=$(e.target),n=$("#"+t.data("current-for"));n.prop("disabled",t.is(":checked")?"disabled":null),n.is("fieldset")&&n.find("select,input").prop("disabled",t.is(":checked")?"disabled":null)});var m=function(e){var t=$(e.target).closest(".autocomplete").find(".autocomplete-suggestions-list").show();$(".autocomplete-suggestions-list").not(t).hide()};$(document).on("click","body",m),$(document).on("focus","body",m),$(document).on("keydown",".autocomplete",function(e){switch(e.which){case 27:var t=$(e.target).closest(".autocomplete");t.find(".autocomplete-suggestions-list").remove(),t.find(".autocomplete-input").focus()}});var v=function(e){var t=$(e),n=t.find("input"),i=t.find("img").not(".js-img-empty"),r={"empty":function(){t.find(".js-img-empty").removeClass("dno"),t.find(".js-img-preview").addClass("dno"),n.val("")},"showDialog":function(){StackExchange.imageUploader.createImageUploadBackground(),StackExchange.imageUploader.uploadImageDialog(function(e){e&&r.setImage(e),StackExchange.imageUploader.removeImageUploadBackground()})},"setImage":function(e,o){e?(n.val(e),o?i.attr("src",o):i.attr("src",e),t.find(".js-img-empty").addClass("dno"),t.find(".js-img-preview").removeClass("dno")):r.empty()}};return r};$(document).on("click",".timeline .js-img-edit",function(e){e.preventDefault();var t=$(e.target),n=v(t.closest(".js-img-edit"));t.closest(".js-img-remove").length?n.empty():n.showDialog()});var b=function(e,t){var n=e.closest(".header-edit-section");c.put(n),p(e).done(function(e){var i=$(e),r=i.find("form");r.length>0&&f("Header",r),i.insertAfter(n),n.remove(),t&&i.find(t).focus(),a(i)})},y=new URLSearchParams(window.location.search),w=y.get("section");if(w){var k=$(".header-edit-btn-ajax",$("#form-section-"+w));k.length>0&&b(k)}var x=function(e,t){e.preventDefault(),b($(e.target),t)};$(document).on("click","a.header-edit-btn-ajax",x),$(document).on("click",".header-edit-section-open a.header-cancel",function(e){var t=$(e.target),n=t.closest(".header-edit-section"),i=c.get(n.attr("id"));i&&(e.preventDefault(),i.insertAfter(n),n.remove())}),$(document).on("submit",".header-edit-section-open form",function(e){e.preventDefault();var t=$(e.target),n=t.closest(".header-edit-section"),i=$(e.target);p(i).done(function(e){var t=$(e);t.is(".editing")||u("Header"),t.insertAfter(n),n.remove(),E(t),a(t)})}),$(document).on("change",".header-edit-section input,.header-edit-section textarea, .header-edit-section select",function(e){d("Header",$(e.target))});var S=function(){var e=null,t=function(e){e.removeClass("sticky").removeClass("sticky-bottom")},n=function(){if(e){var n=$(window).scrollTop();n>e.top()?(e.target.addClass("sticky"),n>e.bottom()?e.target.addClass("sticky-bottom"):e.target.removeClass("sticky-bottom")):(t(e.target),e.updateTop())}},i=function(){var n,i,r,o=$(".job-requirements-form"),a=$(".timeline-wrapper"),s=$(".timeline-sidebar"),c=o.add(s);if(s.length){if(s.is(":empty"))return s.remove(),void 0;t(c),o.length&&a.length?(i=o.outerHeight(!0),e={"top":function(){return n},"bottom":function(){var e=a.outerHeight(!0),t=r+e;return t-i},"updateTop":function(){r=a.offset().top,n=o.offset().top},"target":c},e.updateTop()):e=null}};return $(window).on("scroll resize load",n),i}();S(),$(".js-jobs-recommendations").on("recommendations-updated",S);var C=function(e){e=$(e);var t=$(".timeline-sidebar");t.length&&t.remove(),t=$(".timeline-wrapper"),e.appendTo(t),S(),e.find(".job-requirements").is(".js-complete")?$(".timeline").removeClass("requirements-for-jobs"):$(".timeline").addClass("requirements-for-jobs")};$(document).on("submit",".job-requirements-form",function(e){e.preventDefault();var t=$(e.target);p(t).done(C)}),$(document).on("click",".job-requirements .js-min-complete-list a.js-requirement",function(e){var t=$(e.target).closest("a"),n=$(t.attr("data-target")),i=t.data("category"),r=t.data("search-status");if(i&&StackExchange.using("gps",function(){StackExchange.gps.track("min-complete-prompt.click",{"Item":i,"Status":r})}),n.length){$("html,body").animate({"scrollTop":n.offset().top-20});var o=t[0].hash,a=n.find(".header-edit-btn-ajax");if(n.is("#item-add"))if("Assessment"===i)n.find(".assessment input").click(),StackExchange.using("gps",function(){StackExchange.gps.track("story.assessment.prompt.clicked",{"Location":"Sidebar"})});else{var s=n.find(t.attr("data-update-trigger"));s.removeClass("blink"),window.setTimeout(function(){s.addClass("blink")},0)}else"Experience"===i?$(n).find(".item-edit-button a").click():a.length?(e.target=a[0],x(e,o)):n.find(o).focus();e.preventDefault()}});var E=function(e){{var t=!1;$(".job-requirements .js-min-complete-list a[data-update-trigger]").each(function(n,i){t=t||e.is($(i).attr("data-update-trigger"))})}t&&$(".job-requirements-form").submit()};$(document).on("click",".tag-wrapper .js-tag-toggle",function(e){e.preventDefault();var t=$(e.currentTarget);t.closest(".tag-wrapper-item").find(".more").toggleClass("dno"),t.text("more"===t.text()?"fewer":"more")}),$(document).on("submit","form.import-careers-cv-form",function(){return confirm("This will erase your existing Developer Story and recreate it based on your Careers CV. Continue?")})}};var i=!1;StackExchange.user.initOnboarding=function(n){if(!i){i=!0;var r={},o=(n.searchStatus,n.userId),a=function(e){if(!r[e]){var t=$(e);StackExchange.using("tagEditor",function(){initTagRenderer([""],[""]),StackExchange.tagEditor(t,{"useStacksClasses":!0}),r[e]=!0})}};$(".js-like").is(":visible")&&a(".js-like");var s=function(e){return $.ajax({"type":"POST","url":"/users/story/dismissonboarding/"+o,"data":{"fkey":StackExchange.options.user.fkey,"step":e}})},c=function(e,t){for(var n=0;n<t.length;n++){e.find(".js-error-"+t[n]).removeClass("d-none");var i=e.find("label[for="+t[n]+"]").closest(".js-input-group");i.addClass("has-error"),i.find(".js-input-icon").removeClass("d-none"),("LikedTags"===t[n]||"JobTags"===t[n]||"Tags"===t[n]||"EducationTags"===t[n])&&e.find("#"+t[n]).closest(".js-input-group").addClass("has-error"),$(".js-onboarding").on("keydown",":input",function(e){var t=$(e.currentTarget).closest(".js-input-group");t.removeClass("has-error"),t.find(".js-error, .js-input-icon").addClass("d-none")})}var r=$(".has-error").first();0!==r.length&&r.scrollIntoView()},l=function(e,t){var n=$(e);if($(".js-input-group").removeClass("has-error"),$(".js-error").addClass("d-none"),$(".js-input-icon").addClass("d-none"),n.closest(".step").toggleClass("hidden"),$(".hero-step-counter > .completed").toggleClass("hidden"),$(".hero-step-counter > .js-inactive").toggleClass("hidden"),t){$(".js-onboarding .js-step-2").toggleClass("hidden");var i=$('.js-onboarding-work-education input[type="radio"]:checked').data("wrapper-id");d(i)}else $(".js-onboarding .js-step-1").toggleClass("hidden");$(".js-step-counter").scrollIntoView()},u=function(e,t){var n,i=$(e),r=$(".js-onboarding");if(t){var a=$("input[name=add-xp]:checked").attr("id");n=$("#"+a+"-form")}else n=$("#step1form");return $.ajax({"type":"POST","url":"/users/story/"+o+"/onboarding/save","data":n.serialize()}).done(function(e){e.ModelErrors?(c(r,e.ModelErrors),t&&(i.removeClass("is-loading"),e.JobStoryItemId&&$("#JobStoryItemId").val(e.JobStoryItemId),e.EducationStoryItemId&&$("#EducationStoryItemId").val(e.EducationStoryItemId))):t?(StackExchange.ga.trackFormInputs(n),n.submit()):(StackExchange.ga.trackFormInputs(n),l(i,!0)),t||i.removeClass("is-loading")})},d=function(t){if("work-experience-wrapper"===t){a(".js-work-tags");var n=$(".autocomplete .js-company-autocomplete"),i=$("input[name='Tags']").next().find("input");e(n,i,n,function(e,t){$("input[name='CompanyName']").val(t.name),$("input[name='CompanyId']").val(t.companyId),$("input[name='ListId']").val(t.listId)})}else a(".js-school-tags")};$(".js-onboarding .js-btn-confirm").not(".js-prev").on("click",function(e){e.preventDefault();var t=$(e.currentTarget);t.addClass("is-loading");var n=!!t.data("save-first-item");u(t,n)}),$(".js-onboarding a.js-prev").on("click",function(e){e.preventDefault();var t=$(e.currentTarget);l(t,!1)}),$("input[type=radio][name=SearchStatus]").on("change",function(e){var t=$(e.target),n=$(".js-onboarding");"not-looking"===t.attr("id")?(n.find(".is-required").hide(),n.find(".js-job-recommendations input").prop("checked",!1)):(n.find(".is-required").show(),n.find(".js-job-recommendations input").prop("checked",!0))}),$("#search-status-menu").on("change",function(e){var t=$(e.target);"not-looking"===t.children(":selected").attr("id")?$(".js-onboarding").find(".is-required").hide():$(".js-onboarding").find(".is-required").show()}),$(".js-onboarding .js-hero-dismiss").on("click",function(e){return s($(e.currentTarget).closest(".step").data("step")).always(function(){window.location.href=window.location.href+(window.location.href.contains("?")?"&":"?")+"_=1"}),!1}),$(".js-current-position, .js-current-education").on("click",function(e){var t=$(e.currentTarget),n=t.parent().prev(".js-enddate-select");n.prop("disabled",t.is(":checked"))}),$('.js-onboarding-work-education input[type="radio"]').on("click",function(e){$(".js-work-experience-wrapper, .js-education-wrapper").hide();var t=$(e.currentTarget).data("wrapper-id");$(".js-"+t).show(),d(t)}),$(".textarea-with-counter textarea").each(function(e,t){$(t).charCounter({"min":StackExchange.options.story.minCompleteBodyLength,"max":4e3,"target":$(t).closest(".textarea-with-counter").find(".-counter-span"),"ignoreWhitespace":!0,"setIsValid":function(e){var n=$(t).next(".-counter");n.toggleClass("-success",e),n.toggleClass("-fail",!e),n.find(".-counter-span").toggleClass("dno",e),n.find(".-success-span").toggleClass("dno",!e)}})}),t()}};var r=!1;StackExchange.user.initJobsOnboarding=function(){function e(e){var t=new RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t?decodeURIComponent(t[1].replace(/\+/g," ")):null}if(!r){r=!0;var n=function(){var e=$(".js-location"),t=$(".js-location-place-id");if(e.length>0){var n=e[0],i={"types":["geocode"],"fields":["place_id","name","types"]};if(window.google&&window.google.maps){var r=new google.maps.places.Autocomplete(n,i);r.addListener("place_changed",function(){t.val("G:"+r.getPlace().place_id)})}e.typeWatch({"wait":10,"callback":function(){t.val("")},"highlight":!1,"captureLength":-1})}},i=function(e){StackExchange.tagEditor(e);var t=e.parent().find("div.tag-editor");e.hasClass("error")&&t.addClass("error"),t.find('input[type="text"]').on("focus",function(){t.addClass("focus"),t.removeClass("hover")}),t.find('input[type="text"]').on("focusout",function(){t.removeClass("focus")}),t.on("mouseenter",function(){t.hasClass("focus")||t.addClass("hover")}),t.on("mouseleave",function(){t.removeClass("hover")})},o=function(){StackExchange.using("tagEditor",function(){initTagRenderer("@Tag.RequiredTagsList(Current.Site).AsJavascriptString()".split(" "),"@Tag.ModeratorOnlyTagsList.AsJavascriptString()".split(" ")),$(".js-tags-liked:visible").length>0&&i($(".js-tags-liked")),$(".js-work-tags:visible").length>0&&i($(".js-work-tags")),$(".js-education-tags:visible").length>0&&i($(".js-education-tags"))})},a=function(e,t,n){e.length&&e.typeWatch({"highlight":!1,"wait":500,"captureLength":-1,"callback":function(){e.closest(".coverable-input.input-loader").addClass("loading");var i=$("#min-ds-form").data("user-id");$.ajax({"type":"POST","url":"/users/story/"+i+"/search-lists-autocomplete","data":{"query":e.val(),"fkey":StackExchange.options.user.fkey,"itemType":StackOverflow.Models.Story.UserStoryItemTypeId.Job}}).done(function(i){var r=e.closest(".autocomplete");r.find(".autocomplete-suggestions-list").remove(),e.closest(".coverable-input.input-loader").removeClass("loading");var o=$(i).insertAfter(e);$(".autocomplete-suggestion, .autocomplete-default").on("click",function(e){var i=$(e.currentTarget);if(i.hasClass("autocomplete-default"))return o.hide(),!1;var r=i.data("list-id"),a=i.find(".autocomplete-suggestion-match").text(),s=i.find(".autocomplete-suggestion-image [data-url]").data("url"),c=i.find(".autocomplete-suggestion-url").text();return n&&n(t,{"name":a,"imageUrl":s,"url":c,"listId":r}),o.hide(),!1}),e.is(":focus")||o.hide()})}})},s=function(){var e=$(".autocomplete .js-company-autocomplete");a(e,e,function(e,t){$("input[name='CompanyName']").val(t.name),$("input[name='ListId']").val(t.listId)})},c=function(){n(),o()},l=function(e,t,i){e.fadeOut("fast",function(){$(".js-step-counter").scrollIntoView(),t.fadeIn("slow",function(){i?p($("#user-story-item-type").val()===$("#education-item").val()):(n(),o())})})},u=function(e,t){$(".js-input-group").removeClass("has-error"),$("div.tag-editor").removeClass("error"),$(".js-error").hide(),e.prop("disabled",!0),$(".js-step-counter .step.completed").toggleClass("hidden"),$(".js-step-counter .step.js-inactive").toggleClass("hidden"),$(".js-step-one").is(":visible")?l($(".js-step-one"),$(".js-step-two"),t):$(".js-step-two").is(":visible")&&l($(".js-step-two"),$(".js-step-one"),t),e.prop("disabled",!1)},d=function(e,t,n,i){for(var r="ResumeUploaderModel",o=0;o<t.length;o++)if(0!=t[o].indexOf(r))e.find(".js-error-"+t[o]).show(),e.find(".js-error-"+t[o]).closest(".js-input-group").addClass("has-error"),("LikedTags"===t[o]||"JobTags"===t[o]||"Tags"===t[o]||"EducationTags"===t[o])&&e.find("#"+t[o]).closest(".js-input-group").addClass("has-error");else{var a=t[o].substr(r.length+1);$(".resume-error").html(a).show()}$(".js-onboarding").off("input",":input"),$(".js-onboarding").on("input",":input",function(e){if(!i&&n){var t=$(e.currentTarget),r=t.closest(".js-education-wrapper, .js-work-experience-wrapper");r.find('input[type="text"]:not(.tag-editor), textarea').toArray().every(function(e){return""==$(e).val()})&&(r.find(".js-input-group").removeClass("has-error").find(".js-error").addClass("d-none"),r.find(".js-input-group").find("div.tag-editor").removeClass("error"))}}),$(".js-onboarding").off("keydown",":input"),$(".js-onboarding").on("keydown",":input",function(e){var t=$(e.currentTarget).closest(".js-input-group");t.hasClass("js-tags")&&t.find("div.tag-editor").removeClass("has-error"),t.removeClass("has-error").find(".js-error").hide()}),$(".js-onboarding").off("click","select"),$(".js-onboarding").on("click","select",function(e){var t=$(e.currentTarget).closest(".js-input-group");t.removeClass("has-error").find(".js-error, .js-input-icon").addClass("d-none")});var s=$(".has-error, .resume-error").first();0!==s.length&&s.scrollIntoView()},f=function(t,n){var i=$("#min-ds-form"),r=$("#min-ds-form").data("user-id"),o=null;return $(".js-step-one").is(":visible")?$(".js-step-two input:hidden").prop("disabled",!0):$(".js-step-two").is(":visible")&&$(".js-step-one input:hidden").prop("disabled",!0),o=i.serialize(),$(".js-step-one").is(":visible")?$(".js-step-two input:hidden").prop("disabled",!1):$(".js-step-two").is(":visible")&&$(".js-step-one input:hidden").prop("disabled",!1),t.addClass("loading"),$(".resume-error").html(null).hide(),$.ajax({"type":"POST","url":"/users/story/"+r+"/onboarding/save","data":o}).done(function(r){if(r.ModelErrors||(StackExchange.ga.trackFormInputs(i),n||StackExchange.ga.trackElement(i)),n)r.ModelErrors?d(i,r.ModelErrors,r.HasSavedResume,n):(void 0!==r.HasSavedResume&&$(".min-ds-content").toggleClass("has-saved-resume",r.HasSavedResume),u(t,!0));else{var o=!1;if(r.ModelErrors&&(d(i,r.ModelErrors,r.HasSavedResume,n),o=!0),r.JobStoryItemId&&$("#JobStoryItemId").val(r.JobStoryItemId),r.EducationStoryItemId&&$("#EducationStoryItemId").val(r.EducationStoryItemId),!o){var a=e("returnUrl");a?window.location.replace(a):r.redirectUrl&&window.location.replace(r.redirectUrl)}}t.removeClass("loading")})},h=function(e){e.trigger("keyup")},p=function(e){e?($("#user-story-item-type").val($("#education-item").val()),$(".js-onboarding-work-education #add-education").prop("checked",!0),$(".js-onboarding-work-education #add-work").prop("checked",!1),h($(".js-education-wrapper .textarea-with-counter textarea"))):($("#user-story-item-type").val($("#job-item").val()),$(".js-onboarding-work-education #add-work").prop("checked",!0),$(".js-onboarding-work-education #add-education").prop("checked",!1),h($(".js-work-experience-wrapper .textarea-with-counter textarea")),s()),o()},g=function(){$('.js-onboarding-work-education input[type="radio"]').on("click",function(e){$(".js-work-experience-wrapper, .js-education-wrapper").hide();
var t=$(e.currentTarget).data("wrapper-id");$(".js-"+t).show(),"work-experience-wrapper"===t?p(!1):p(!0)}),$("#wizard-previous-btn").on("click",function(e){return u($(e.currentTarget),!1),!1}),$("#wizard-next-btn").on("click",function(e){return f($(e.currentTarget),!0),!1}),$("#wizard-done-btn").on("click",function(e){return f($(e.currentTarget),!1),!1}),$(".js-work-is-current, .js-education-is-current").on("click",function(e){var t=$(e.target),n=t.is(".js-work-is-current")?$(".js-work-end-year"):$(".js-education-end-year");t.is(":checked")?n.prop("disabled",!0):n.prop("disabled",!1)}),$(".js-work-end-year, .js-education-end-year").change(function(e){var t=$(e.currentTarget),n=t.is(".js-work-end-year")?$(".js-work-start-year"):$(".js-education-start-year"),i=t.is(".js-work-end-year")?$(".js-work-end-year"):$(".js-education-end-year"),r=parseInt(n.val(),10),o=parseInt(i.val(),10);r>o&&n.val(o)}),$(".js-work-start-year, .js-education-start-year").change(function(e){var t=$(e.currentTarget),n=t.is(".js-work-start-year")?$(".js-work-start-year"):$(".js-education-start-year"),i=t.is(".js-work-start-year")?$(".js-work-end-year"):$(".js-education-end-year");if(i.length>0){var r=parseInt(n.val(),10),o=parseInt(i.val(),10);r>o&&o>0&&i.val(r)}}),$(".textarea-with-counter textarea").each(function(e,t){$(t).charCounter({"min":StackExchange.options.story.minCompleteBodyLength,"max":4e3,"target":$(t).closest(".textarea-with-counter").find(".-counter-span"),"ignoreWhitespace":!0,"setIsValid":function(e){var n=$(t).next(".-counter");n.toggleClass("-success",e),n.toggleClass("-fail",!e),n.find(".-counter-span").toggleClass("dno",e),n.find(".-success-span").toggleClass("dno",!e)}})}),$("input[type=radio][name=SearchStatus]").on("change",function(e){var t=$(e.target),n=$(".js-onboarding");"SearchState-NotLooking"===t.attr("id")?n.find(".js-job-recommendations input").prop("checked",!1):n.find(".js-job-recommendations input").prop("checked",!0)}),p($("#user-story-item-type").val()===$("#education-item").val())};t(),c(),g()}},StackExchange.user.handleListImageError=function(e){$(e).parent("div").hide().prev(".js-logo-blank").css("display","flex");var t=$(e).data("list-id");return t?$.ajax({"type":"POST","url":"/users/story/lists/enqueue-for-logo-update","data":{"fkey":StackExchange.options.user.fkey,"listId":t}}):void 0};var o=!1;StackExchange.user.initJobSearchPreferences=function(){function e(e,t){StackExchange.helpers.showMobileMessage(e,t),$("body").scrollIntoView()}function t(e,t,i,r){var o=b.find(".js-disliked-company-id").filter(function(t,n){return $(n).val()==e});if(0==o.length){var a=(n(t),$(".js-disliked-company-template").clone().removeClass("js-disliked-company-template").removeClass("d-none").data("id",e));a.find(".js-disliked-company-name").html(t),a.find(".js-disliked-company-img").attr("src",r),a.find(".js-disliked-company-id").val(e).attr("name",a.data("id-field-name"));var s=a.find(".js-disliked-company-link");s.attr("href",s.attr("href")+i),b.prepend(a)}}function n(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}if(!o){o=!0,StackExchange.using("tagEditor",function(){var e={"suggestionsWidth":StackExchange.options.isMobile?null:466,"useStacksClasses":!0};StackExchange.tagEditor($("#technologies-like"),e),StackExchange.tagEditor($("#technologies-dislike"),e)});var i=$("#location-widget"),r=$("#location-items"),a=$("#location-address"),s=$("#location-place-id"),c=$("#location-add"),l=$("#location-home-item"),u=$("#location-include-home"),d=$("#geo-tag-template").html(),f=r.data("initial")||[],h=$("input[name='SearchStatus']"),p=$(".js-salary"),g=$(".js-more"),m=$("#notify-container"),v=$(".js-disliked-companies-autocomplete"),b=$(".js-disliked-companies");p.keydown(function(e){return e.key&&1===e.key.length&&!/[0-9]/.test(e.key)?!1:void 0}),u.change(function(e){$(e.currentTarget).is(":checked")?l.removeClass("dno"):l.addClass("dno")});var y=function(){r.find(".geo-tag").not(l).remove();for(var e=0;e<f.length;e++){var t=f[e],n=$.extend({"i":e,"NeedsVisaClass":t.NeedsVisa?"needs-visa":""},t);$(d.formatUnicorn(n)).appendTo(r)}};if(r.on("click",".delete-location",function(e){e.preventDefault();var t=$(e.target).closest(".geo-tag[data-index]");t.length&&1===f.splice(t.data("index"),1).length&&y()}),c.click(function(e){e.preventDefault();var t={};i.find("[data-property]").each(function(e,n){var i=$(n);t[i.data("property")]=i.is("input[type=checkbox]")?i.is(":checked"):i.val(),i.val("").prop("checked",!1)}),f.push(t),y(),c.prop("disabled",!0)}),a.typeWatch({"wait":10,"callback":function(){s.val(""),c.prop("disabled",!0)},"highlight":!1,"captureLength":-1}),window.google&&window.google.maps){var w={"types":["geocode"]},k=new google.maps.places.Autocomplete(a[0],w);k.addListener("place_changed",function(){var e=k.getPlace(),t=e.address_components.reduce(function(e,t){return{"types":e.types.concat(t.types)}}).types;t.indexOf("country")>=0&&(s.val("G:"+e.place_id),c.prop("disabled",!1))})}var x=function(e,t){e=e.chosen(t);var n=function(t){var n=e.data("name");if(n){e.next().find(".search-choice-close").removeClass("search-choice-close").addClass("delete-tag");var i=e.parent();i.find('[name^="{0}["]'.formatUnicorn(n)).remove();var r=e.val()||[];$.each(r,function(e){$("<input>").attr({"type":"hidden","name":"{0}[{1}]".formatUnicorn(n,e),"value":r[e]}).appendTo(i)}),t===!0&&StackExchange.ga.recordInputChange(e)}};e.change(function(){return n(!0)}),n()};x($("#developer-roles"),{"max_selected_options":StackExchange.options.jobPreferences.maxNumDeveloperRoles}),x($("#industries-liked"),{"max_selected_options":StackExchange.options.jobPreferences.maxNumIndustries}),x($("#industries-disliked")),h.on("change",function(){h.each(function(e,t){var n=$(t),i=n.parent("label").siblings(".opt-in-message");n.is(":checked")?i.css("visibility","visible"):i.css("visibility","hidden")})});var S=function(e,t){e.siblings(".tag-editor").toggleClass("has-error",t),e.siblings(".error-message").toggle(t)},C={"technologies-like":StackExchange.options.story.likedTagsMaxLength,"technologies-dislike":StackExchange.options.story.dislikedTagsMaxLength};$("#technologies-like, #technologies-dislike").on("keydown keyup change paste",function(e){var t=$(e.target);S(t,t.val().length>C[t.attr("id")])}),v.autoComplete({"menuClass":"bg-white ps-absolute z-modal overflow-x-hidden overflow-y-auto bx bb bc-black-200 bs-md is-visible c-pointer company-page-autocomplete","minChars":1,"source":function(e,t){try{i.abort()}catch(n){}var i=$.getJSON("/jobs/get-companies",{"term":e,"max":6},function(e){t(e)})},"renderItem":function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var i=n(e.CompanyName),r=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="ps-relative d-flex fl1 p8 lh-lg fc-black-700 autocomplete-suggestion"'+(' data-id="'+e.Id+'"')+(' data-name="'+i+'"')+(' data-logo-url="'+e.LogoUrl+'"')+(' data-slug="'+e.Slug+'">')+('<img class="flex--item -logo" src="'+e.LogoUrl+'" />')+('<span class="flex--item pl6 truncate">'+i.replace(r,"<span class='fw-bold td-underline'>$1</span>")+"</span>")+"</div>"},"onSelect":function(e,n,i){var r=i.data("id"),o=i.data("name"),a=i.data("slug"),s=i.data("logo-url");t(r,o,a,s),$(this).focus(),e.preventDefault()}}),b.on("click",".js-close",function(e){return $(this).closest(".js-disliked-company").remove(),e.preventDefault(),!1});var E=$("form#jobPreferencesForm");E.on("submit",function(t){t.preventDefault(),m.html("");var n=E.serialize();return StackExchange.helpers.addSpinner($("#spinnerContainer")),$.ajax({"type":"POST","url":E.attr("action"),"data":n}).done(function(){var t=h.filter(":checked"),n=!t.data("was-checked");n&&StackExchange.ga.track("Account Management","Job Search Status Change Save",t.data("label")),StackExchange.options.isMobile?e("<b>Success!</b> Your Job Preferences have been saved.","success"):window.location.href=window.location.href}).fail(function(t){if(400===t.status){var n=t.responseJSON;if(n.industriesTooLong||n.developerRolesTooLong){var i=n.industriesTooLong?"Add up to "+StackExchange.options.jobPreferences.maxNumIndustries+" industries only":"Add up to "+StackExchange.options.jobPreferences.maxNumDeveloperRoles+" roles only";if(StackExchange.options.isMobile)e(i,"warning");else{var r={"type":"error","position":"toast","transient":!0,"transientDuration":4e3};StackExchange.helpers.showMessage($("body"),i,r)}return}n.likedTagsTooLong&&S($("#technologies-like"),!0),n.dislikedTagsTooLong&&S($("#technologies-dislike"),!0),null!=n.savedResumeError&&n.savedResumeError.length>0?($(".resume-error").html(n.savedResumeError).show(),$(".js-resume-uploader").scrollIntoView()):$("#tags").scrollIntoView()}else StackExchange.options.isMobile?e("Sorry, something went wrong","error"):$("#save-error-message").show().scrollIntoView()}).always(function(){StackExchange.helpers.removeSpinner()}),!1}),$(".js-save-job-preferences").click(function(){E.submit()}),g.click(function(){var e=$(this),t=e.siblings(".-more-item"),n=t.first(),i=!n.hasClass("dno");if(i){var r=e.offset().top-n.offset().top,o=$("body").scrollTop()-r;$("body").scrollTop(o)}return t.toggleClass("dno"),e.html(i?"+ More":"- Less"),!1})}};var a=!1;StackExchange.user.initCvView=function(){a||(a=!0,$(".js-cv-story").on("click",".js-toggle-more",function(){var e=$(this),t=e.closest("section, .section, .js-subsection"),n=t.find(".js-hidden-item");n.toggleClass("d-none");var i=e.data("fewer-text"),r=e.data("more-text"),o=e.html();e.html(n.filter(":hidden").length?o.replace(i,r):o.replace(r,i))}))},StackExchange.user.initListEditor=function(){var e=$("a.js-edit-list"),t=$("header.js-edit-list"),n=$("form.js-delete-list"),i=t.prev("header");e.click(function(e){e.preventDefault(),t.removeClass("hidden"),i.addClass("hidden")}),n.submit(function(e){e.preventDefault();var t=$(e.currentTarget);confirm("Are you sure you want to delete this list?")&&$.ajax({"type":"POST","url":t.attr("action"),"data":t.serialize()}).done(function(e){e.success&&$("#content").prepend(e.message)})});var r=function(e){var t=$(e),n=t.find("input"),i=t.find("img").not(".js-img-empty"),r={"empty":function(){t.find(".js-img-empty").removeClass("dno"),t.find(".js-img-preview").addClass("dno"),n.val("")},"showDialog":function(){StackExchange.imageUploader.createImageUploadBackground(),StackExchange.imageUploader.uploadImageDialog(function(e){e&&r.setImage(e),StackExchange.imageUploader.removeImageUploadBackground()})},"setImage":function(e){e?(n.val(e),i.attr("src",e),t.find(".js-img-empty").addClass("dno"),t.find(".js-img-preview").removeClass("dno")):r.empty()}};return r};t.on("click",".js-img-edit",function(e){e.preventDefault();var t=$(e.target),n=r(t.closest(".js-img-edit"));t.closest(".js-img-remove").length?n.empty():n.showDialog()}),$(".js-cancel-edit").click(function(e){e.preventDefault(),t.addClass("hidden"),i.removeClass("hidden")})};var s=!1;StackExchange.user.initJobRecommendations=function(e){if(!s){s=!0;var t=function(){$.ajax({"type":"POST","url":"/users/story/fetch-jobs-recommendations/"+StackExchange.user.options.userId,"data":{"source":e,"fkey":StackExchange.options.user.fkey}}).done(function(e){var t=$(".js-jobs-recommendations");t.append(e),StackExchange.ga.bindHandlers(t),t.trigger("recommendations-updated")})},n=function(e){return $.ajax({"type":"POST","url":"/users/story/toggle-jobs-recommendations/"+StackExchange.user.options.userId,"data":{"fkey":StackExchange.options.user.fkey,"collapseJobs":e}})};$(document).on("click",".js-toggle-jobs",function(){var e=$(".js-sidebar-jobs-visible").hasClass("is-visible");n(e).always(function(){$(".js-sidebar-jobs-visible, .js-sidebar-jobs-hidden").toggleClass("is-visible is-hidden")})}),$(document).on("click",".js-jobs-recommendations a",function(t){var n=$(t.target).closest(".js-click-target"),i=n.data("target");StackExchange.using("gps",function(){StackExchange.gps.track("story_sidebar.jobs_recommendations.click",{"target":i,"source":e})})}),t()}};var c=!1;StackExchange.user.initResumeUploader=function(e){if(!c){c=!0;try{l.init(e)}catch(t){$("#uploader-wrapper .loading-text").html("Loading failed.")}}};var l;!function(e){function t(e){function t(){null!==g&&(clearTimeout(g),g=null)}function n(e,n){$("input[name='HasSavedResume']").val("True"),$("input[name='SavedResumeId']").val(e).trigger("change"),$(".saved-resume-filename").text(n),$(".upload-complete").fadeIn(100),t(),g=setTimeout(function(){$(".upload-complete").fadeOut(),t()},15e3),i(e,n),$(".js-resume-uploader").addClass("has-resume")}function i(e,t){$(".download-saved-resume").attr("href","/jobs/resume/download?savedResumeId="+e).attr("download",t).show()}function r(e){switch(e){case 0:return"GoogleDrive";case 1:return"Dropbox";default:return"None"}}function o(e){switch(e){case 0:return 1;case 1:return 2;default:throw"Invalid external resume source"}}function a(e){s(e)}function s(e){var t=r(e.source);$(".uploading-filename").text(e.displayName),$(".resume-error").html(null).hide(),$(".uploading-text").html("Fetching from "+t),$(".js-saved-resume-visible-to-employers").prop("checked",!0),m.addClass("is-fetching-external-resume"),$.post("/jobs/resume/fetch-from-external-source",{"fkey":StackExchange.options.user.fkey,"Source":o(e.source),"Location":e.location,"AuthToken":e.authToken,"Filename":e.displayName}).then(function(e){m.removeClass("is-fetching-external-resume"),e.Success?n(e.SavedResumeId,e.Filename):$(".resume-error").html(e.ErrorMessage).show()},function(){m.removeClass("is-fetching-external-resume"),$(".resume-error").html("An unknown error occurred").show()})}function c(e){var t="There was an error.";e&&("string"==typeof e?t=e:e instanceof Error&&(t=e.message)),$(".resume-error").text(t).show()}function l(t){return new Promise(function(n,i){switch(t){case 0:window.gapi.auth.authorize({"client_id":e.googleDrive.clientId,"scope":["https://www.googleapis.com/auth/drive.readonly"],"immediate":!1},function(t){if(t&&!t.error){var r=Math.min(Math.max(window.innerWidth,350),650),o=Math.min(Math.max(window.innerHeight,566),1051),a=(new google.picker.PickerBuilder).addView(google.picker.ViewId.DOCUMENTS).addView(google.picker.ViewId.PDFS).setOAuthToken(t.access_token).setAppId(e.googleDrive.appId).setSize(r,o).setDeveloperKey(e.googleDrive.developerKey).setCallback(function(e){u(e,t.access_token).then(n,i)}).build();a.setVisible(!0)}});break;case 1:Dropbox.choose({"success":function(e){d(e).then(n,i)},"linkType":"direct","extensions":[".pdf",".doc",".docx",".odt",".txt"]})}})}function u(e,t){return new Promise(function(n){if(e&&e[google.picker.Response.ACTION]===google.picker.Action.PICKED){var i=e[google.picker.Response.DOCUMENTS][0];if(i){var r=i[google.picker.Document.ID],o=i[google.picker.Document.MIME_TYPE],a=i[google.picker.Document.NAME];"application/vnd.google-apps.document"===o&&(a+=".pdf"),n({"source":0,"location":r,"authToken":t,"displayName":a})}}})}function d(t){return new Promise(function(n,i){if(t.length>0){var r=t[0];r.bytes>e.maxResumeUploadSize?i(new Error("Resume file is too large. Please limit resume to "+e.maxResumeUploadSize+" bytes.")):n({"source":1,"location":r.link,"displayName":r.name})}})}var f=document.getElementById("uploader-wrapper");if(null!==f){var h="";window.Dropbox&&Dropbox.isBrowserSupported()?(h='<a href="#" class="js-dropbox-trigger">Dropbox</a>',$("#uploader-wrapper").on("click",".js-dropbox-trigger",function(e){e.preventDefault(),l(1).then(a,c)})):$("button.js-dropbox-trigger").hide();var p="";window.gapi?(p='<a href="#" class="js-google-drive-trigger">Google Drive</a>',window.gapi.load("auth",function(){}),window.gapi.load("picker",function(){}),$("#uploader-wrapper").on("click",".js-google-drive-trigger",function(e){e.preventDefault(),l(0).then(a,c)})):$("button.js-google-drive-trigger").hide();var g=null,m=$(".js-resume-uploader");if(m.hasClass("js-resume-uploader-full")){{new qq.FineUploader({"element":f,"multiple":!1,"request":{"endpoint":"/jobs/resume/upload","params":{"fkey":StackExchange.options.user.fkey}},"text":{"fileInputTitle":""},"validation":{"allowedExtensions":e.allowedFileExtensions,"sizeLimit":e.maxResumeUploadSize},"callbacks":{"onTotalProgress":function(e,t){var n=Math.floor(100*e/t);n=Math.min(n,100),100==n?($(".uploading-text").html("Scanning for viruses"),m.removeClass("is-uploading"),m.addClass("is-virus-scanning")):$(".uploading-text").html(n+"% Complete")},"onValidate":function(e){var t=window.qq.Promise,n=new t;return/[\/\\:\*\?"<>\|]/.test(e.name)?($(".resume-error").html("The file name is invalid").show(),n.failure(!1)):n.success(!0),n},"onSubmit":function(e,t){$(".uploading-filename").text(t),$(".uploading-text").html("0% Complete"),$(".resume-error").html(null).hide(),$(".js-saved-resume-visible-to-employers").prop("checked",!0),m.addClass("is-uploading")},"onComplete":function(e,t,i){m.removeClass("is-uploading").removeClass("is-virus-scanning"),$(".uploading-text").html(null),i.success?n(i.savedResumeId,i.filename):$(".resume-error").html(i.message).show()},"onError":function(e,t,n){return m.removeClass("is-uploading").removeClass("is-virus-scanning"),$(".uploading-text").html(null),"XHR returned response code 0"==n?($(".resume-error").html("A network error has occurred. Are you connected to the internet?").show(),void 0):(-1==n.indexOf("has an invalid extension.")&&-1==n.indexOf("is too large")&&"XHR returned response code 400"!=n&&alert("Error on file upload: "+n),void 0)}}})}""!==p&&$("#uploader-wrapper .upload-text .js-google-drive-link").html((""===h?" or ":", ")+p),""!==h&&$("#uploader-wrapper .upload-text .js-dropbox-link").html((""===p?" or ":", or ")+h)}$("body").on("click",".js-remove-saved-resume",function(){$("input[name='SavedResumeId']").val(null).trigger("change"),$("input[name='HasSavedResume']").val("False"),$(".js-saved-resume-visible-to-employers").prop("checked",!1),$(".resume-error").hide(),$(".js-resume-uploader").removeClass("has-resume"),$(".upload-complete").hide(),$(".js-last-saved-resume-updated-date").hide(),t()})}}e.init=t}(l||(l={}))}(StackExchangeDevStory||(StackExchangeDevStory={}));var StackOverflow;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e[e.Job=1]="Job",e[e.PublicArtifact=2]="PublicArtifact",e[e.TopPost=3]="TopPost",e[e.AppsAndSoftware=4]="AppsAndSoftware",e[e.Education=5]="Education",e[e.Certification=6]="Certification",e[e.Assessment=7]="Assessment",e[e.Generic=10]="Generic",e[e.AutoGenerated=99]="AutoGenerated",e[e.OpenSource=100]="OpenSource",e[e.Reading=200]="Reading"}(t=e.UserStoryItemTypeId||(e.UserStoryItemTypeId={}))}(t=e.Story||(e.Story={}))}(t=e.Models||(e.Models={}))}(StackOverflow||(StackOverflow={}));